{"ast":null,"code":"import _objectSpread from\"C:/Users/satya/OneDrive/Desktop/DEVLOPMENT/projects/Zerodha/dashboard/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";const Positions=()=>{const[allPositions,setAllPositions]=useState([]);useEffect(()=>{axios.get(\"http://localhost:3001/allPositions\").then(res=>{console.log(res.data);// clean + sanitize data\nconst cleanData=res.data.map(item=>_objectSpread(_objectSpread({},item),{},{avg:Number(item.avg)||0,price:Number(item.price)||0,qty:Number(item.qty)||0}));setAllPositions(cleanData);});},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"title\",children:[\"Positions (\",allPositions.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"order-table\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Product\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Instrument\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Qty.\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Avg.\"}),/*#__PURE__*/_jsx(\"th\",{children:\"LTP\"}),/*#__PURE__*/_jsx(\"th\",{children:\"P&L\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Chg.\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:allPositions.map((stock,index)=>{const curValue=stock.price*stock.qty;const pnl=curValue-stock.avg*stock.qty;const isProfit=pnl>=0;const profClass=isProfit?\"profit\":\"loss\";const dayClass=stock.isLoss?\"loss\":\"profit\";return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:stock.product||\"--\"}),/*#__PURE__*/_jsx(\"td\",{children:stock.name||\"--\"}),/*#__PURE__*/_jsx(\"td\",{children:stock.qty}),/*#__PURE__*/_jsx(\"td\",{children:stock.avg.toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{children:stock.price.toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{className:profClass,children:pnl.toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{className:dayClass,children:stock.day||\"--\"})]},index);})})]})})]});};export default Positions;","map":{"version":3,"names":["React","useState","useEffect","axios","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","Positions","allPositions","setAllPositions","get","then","res","console","log","data","cleanData","map","item","_objectSpread","avg","Number","price","qty","children","className","length","stock","index","curValue","pnl","isProfit","profClass","dayClass","isLoss","product","name","toFixed","day"],"sources":["C:/Users/satya/OneDrive/Desktop/DEVLOPMENT/projects/Zerodha/dashboard/src/components/Positions.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\nconst Positions = () => {\n  const [allPositions, setAllPositions] = useState([]);\n\n  useEffect(() => {\n    axios.get(\"http://localhost:3001/allPositions\").then((res) => {\n      console.log(res.data);\n      // clean + sanitize data\n      const cleanData = res.data.map((item) => ({\n        ...item,\n        avg: Number(item.avg) || 0,\n        price: Number(item.price) || 0,\n        qty: Number(item.qty) || 0,\n      }));\n      setAllPositions(cleanData);\n    });\n  }, []);\n\n  return (\n    <>\n      <h3 className=\"title\">Positions ({allPositions.length})</h3>\n\n      <div className=\"order-table\">\n        <table>\n          <thead>\n            <tr>\n              <th>Product</th>\n              <th>Instrument</th>\n              <th>Qty.</th>\n              <th>Avg.</th>\n              <th>LTP</th>\n              <th>P&L</th>\n              <th>Chg.</th>\n            </tr>\n          </thead>\n\n          <tbody>\n            {allPositions.map((stock, index) => {\n              const curValue = stock.price * stock.qty;\n              const pnl = curValue - stock.avg * stock.qty;\n              const isProfit = pnl >= 0;\n              const profClass = isProfit ? \"profit\" : \"loss\";\n              const dayClass = stock.isLoss ? \"loss\" : \"profit\";\n\n              return (\n                <tr key={index}>\n                  <td>{stock.product || \"--\"}</td>\n                  <td>{stock.name || \"--\"}</td>\n                  <td>{stock.qty}</td>\n                  <td>{stock.avg.toFixed(2)}</td>\n                  <td>{stock.price.toFixed(2)}</td>\n                  <td className={profClass}>{pnl.toFixed(2)}</td>\n                  <td className={dayClass}>{stock.day || \"--\"}</td>\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n      </div>\n    </>\n  );\n};\n\nexport default Positions;\n"],"mappings":"0JAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,IAAA,IAAAC,KAAA,CAAAC,GAAA,IAAAC,IAAA,CAAAC,QAAA,IAAAC,SAAA,yBAE1B,KAAM,CAAAC,SAAS,CAAGA,CAAA,GAAM,CACtB,KAAM,CAACC,YAAY,CAAEC,eAAe,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CAEpDC,SAAS,CAAC,IAAM,CACdC,KAAK,CAACU,GAAG,CAAC,oCAAoC,CAAC,CAACC,IAAI,CAAEC,GAAG,EAAK,CAC5DC,OAAO,CAACC,GAAG,CAACF,GAAG,CAACG,IAAI,CAAC,CACrB;AACA,KAAM,CAAAC,SAAS,CAAGJ,GAAG,CAACG,IAAI,CAACE,GAAG,CAAEC,IAAI,EAAAC,aAAA,CAAAA,aAAA,IAC/BD,IAAI,MACPE,GAAG,CAAEC,MAAM,CAACH,IAAI,CAACE,GAAG,CAAC,EAAI,CAAC,CAC1BE,KAAK,CAAED,MAAM,CAACH,IAAI,CAACI,KAAK,CAAC,EAAI,CAAC,CAC9BC,GAAG,CAAEF,MAAM,CAACH,IAAI,CAACK,GAAG,CAAC,EAAI,CAAC,EAC1B,CAAC,CACHd,eAAe,CAACO,SAAS,CAAC,CAC5B,CAAC,CAAC,CACJ,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEd,KAAA,CAAAI,SAAA,EAAAkB,QAAA,eACEtB,KAAA,OAAIuB,SAAS,CAAC,OAAO,CAAAD,QAAA,EAAC,aAAW,CAAChB,YAAY,CAACkB,MAAM,CAAC,GAAC,EAAI,CAAC,cAE5DtB,IAAA,QAAKqB,SAAS,CAAC,aAAa,CAAAD,QAAA,cAC1BtB,KAAA,UAAAsB,QAAA,eACEpB,IAAA,UAAAoB,QAAA,cACEtB,KAAA,OAAAsB,QAAA,eACEpB,IAAA,OAAAoB,QAAA,CAAI,SAAO,CAAI,CAAC,cAChBpB,IAAA,OAAAoB,QAAA,CAAI,YAAU,CAAI,CAAC,cACnBpB,IAAA,OAAAoB,QAAA,CAAI,MAAI,CAAI,CAAC,cACbpB,IAAA,OAAAoB,QAAA,CAAI,MAAI,CAAI,CAAC,cACbpB,IAAA,OAAAoB,QAAA,CAAI,KAAG,CAAI,CAAC,cACZpB,IAAA,OAAAoB,QAAA,CAAI,KAAG,CAAI,CAAC,cACZpB,IAAA,OAAAoB,QAAA,CAAI,MAAI,CAAI,CAAC,EACX,CAAC,CACA,CAAC,cAERpB,IAAA,UAAAoB,QAAA,CACGhB,YAAY,CAACS,GAAG,CAAC,CAACU,KAAK,CAAEC,KAAK,GAAK,CAClC,KAAM,CAAAC,QAAQ,CAAGF,KAAK,CAACL,KAAK,CAAGK,KAAK,CAACJ,GAAG,CACxC,KAAM,CAAAO,GAAG,CAAGD,QAAQ,CAAGF,KAAK,CAACP,GAAG,CAAGO,KAAK,CAACJ,GAAG,CAC5C,KAAM,CAAAQ,QAAQ,CAAGD,GAAG,EAAI,CAAC,CACzB,KAAM,CAAAE,SAAS,CAAGD,QAAQ,CAAG,QAAQ,CAAG,MAAM,CAC9C,KAAM,CAAAE,QAAQ,CAAGN,KAAK,CAACO,MAAM,CAAG,MAAM,CAAG,QAAQ,CAEjD,mBACEhC,KAAA,OAAAsB,QAAA,eACEpB,IAAA,OAAAoB,QAAA,CAAKG,KAAK,CAACQ,OAAO,EAAI,IAAI,CAAK,CAAC,cAChC/B,IAAA,OAAAoB,QAAA,CAAKG,KAAK,CAACS,IAAI,EAAI,IAAI,CAAK,CAAC,cAC7BhC,IAAA,OAAAoB,QAAA,CAAKG,KAAK,CAACJ,GAAG,CAAK,CAAC,cACpBnB,IAAA,OAAAoB,QAAA,CAAKG,KAAK,CAACP,GAAG,CAACiB,OAAO,CAAC,CAAC,CAAC,CAAK,CAAC,cAC/BjC,IAAA,OAAAoB,QAAA,CAAKG,KAAK,CAACL,KAAK,CAACe,OAAO,CAAC,CAAC,CAAC,CAAK,CAAC,cACjCjC,IAAA,OAAIqB,SAAS,CAAEO,SAAU,CAAAR,QAAA,CAAEM,GAAG,CAACO,OAAO,CAAC,CAAC,CAAC,CAAK,CAAC,cAC/CjC,IAAA,OAAIqB,SAAS,CAAEQ,QAAS,CAAAT,QAAA,CAAEG,KAAK,CAACW,GAAG,EAAI,IAAI,CAAK,CAAC,GAP1CV,KAQL,CAAC,CAET,CAAC,CAAC,CACG,CAAC,EACH,CAAC,CACL,CAAC,EACN,CAAC,CAEP,CAAC,CAED,cAAe,CAAArB,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}